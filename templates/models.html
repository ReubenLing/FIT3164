{% extends "_template.html" %}
{% block modelsactive1 %}class="active"{% endblock %}
{% block modelsactive2 %}class="active"{% endblock %}
{% block styles %}
<style>
	table td + td { border-left:1px solid slategray; }
</style>
{% endblock %}
{% block content %}
<div class="container">
	<!-- Sample form - not functional -->
	<h3>Irrigation Recommendations</h3>
	<p class='flow-text'>Looking for a new irrigation system? Enter your details below and find the most suitable
		irrigation system for your needs, from data provided by the Agriculture Victoria's Resources Online.</p>
	<p class='red-text'>Values are placeholders for now</p>
	<form action="{{ url_for('irrigation_proto') }}" method="post">
		<div class="row">
			<div class="input-field col s12 m6">
				<select name="capital_cost">
					<option value="" disabled selected>Choose your option</option>
					<option value="4">Very High</option>
					<option value="3">High</option>
					<option value="2">Modest</option>
					<option value="1">Low</option>
				</select>
				<label>How much capital cost are you willing to incur?</label>
			</div>
			<div class="input-field col s12 m6">
				<select name="pumping_cost">
					<option value="" disabled selected>Choose your option</option>
					<option value="4">High</option>
					<option value="3">Moderate</option>
					<option value="2">Modest</option>
					<option value="1">Low</option>
				</select>
				<label>How much pumping cost are you willing to incur?</label>
			</div>
		</div>
		<div class="row">
			<div class="input-field col s12 m6">
				<select name="labour_requirements">
					<option value="" disabled selected>Choose your option</option>
					<option value="4">High</option>
					<option value="3">Moderate</option>
					<option value="2">Modest</option>
					<option value="1">Low</option>
				</select>
				<label>What level of labour requirements do you want the system to require?</label>
			</div>
			<div class="input-field col s12 m6">
				<select name="efficiency">
					<option value="" disabled selected>Choose your option</option>
					<option value="4">Very High</option>
					<option value="3">High</option>
					<option value="2">Moderate</option>
					<option value="1">Low</option>
				</select>
				<label>What level of efficiency do you want from the system?</label>
			</div>
		</div>
		<div class="row">
			<div class="input-field col s12 m6">
				<select name="uniformity">
					<option value="" disabled selected>Choose your option</option>
					<option value="4">Very High</option>
					<option value="3">High</option>
					<option value="2">Low</option>
					<option value="1">Very Low</option>
				</select>
				<label>How uniform do you want the irrigation to be?</label>
			</div>
			<p class="range-field col s12 m6">
				How many recommendations do you want?
				<input type="range" name="num_recs" min="1" max="10" value="3" />
			</p>
		</div>
		<button class="btn waves-effect waves-light right" type="submit" name="action">Submit
			<i class="material-icons right">send</i>
		</button>
	</form>
	<br><br>

	<!-- Model output area -->
	{% if response is defined %}
	{% if response|length == 10 %}
	{% for system in response %}
	<div class="card">
		<div class="card-content">
			<span class="card-title">{{ system.data.nice_name }}</span>
			<p>{{ system.data.description|safe }}</p>
			<p><a href="{{ system.description_src }}">(source)</a></p>
		</div>
		<div class="card-tabs">
			<ul class="tabs tabs-fixed-width">
				<li class="tab"><a class="active" href="#fields{{ loop.index }}">Suitability</a></li>
				<li class="tab"><a href="#comments{{ loop.index }}">Considerations</a></li>
				<li class="tab"><a href="#reading{{ loop.index }}">Further Reading</a></li>
			</ul>
		</div>
		<div class="card-content grey lighten-4">
			<div id="fields{{ loop.index }}">
				<ul class="browser-default">
					<h3>Score: {{ system.score }}</h3>
					<table class="centered">
						<thead>
							<tr>
								<th>Capital Cost</th>
								<th>Pumping Cost</th>
								<th>Labour Requirements</th>
								<th>Efficiency</th>
								<th>Uniformity</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td class="{{ system.matches[0] }} lighten-2">{{ system.fields[0] }}</td>
								<td class="{{ system.matches[1] }} lighten-2">{{ system.fields[1] }}</td>
								<td class="{{ system.matches[2] }} lighten-2">{{ system.fields[2] }}</td>
								<td class="{{ system.matches[3] }} lighten-2">{{ system.fields[3] }}</td>
								<td class="{{ system.matches[4] }} lighten-2">{{ system.fields[4] }}</td>
							</tr>
						</tbody>
					</table>
				</ul>
			</div>
			<div id="comments{{ loop.index }}">
				<ul class="browser-default">
					{% for comment in system.data.comments %}
					<li>{{ comment }}</li>
					{% endfor %}
				</ul>
			</div>
			<div id="reading{{ loop.index }}">
				<ul class="browser-default">
					{% for pair in system.data.links %}
					<li><a href="{{ pair[1] }}">{{ pair[0] }}</a></li>
					{% endfor %}
				</ul>
			</div>
		</div>
	</div>
	{% endfor %}
	{% endif %}
	{% endif %}

	<!-- Prototype form - for initial testing -->
	<h3>Prototype Form</h3>
	<p class="flow-text">Enter the number of cows in your farm below, and we will predict your water consumption.</p>
	<form action="{{ url_for('test_output') }}" method="post">
		<div class="row">
			<p class="range-field col s12 m6">
				Number of Cows
				<input type="range" name="test_range" min="0" max="100" />
			</p>
			<div class="input-field col s12 m6">
				<input type="text" name="test_input" id="cows">
				<label for="cows">Number of Cows</label>
			</div>
		</div>
		<button class="btn waves-effect waves-light right" type="submit" name="action">Submit
			<i class="material-icons right">send</i>
		</button>
	</form>

	<!-- Model output area -->
	{% if response is defined %}
	{% if response.num_cows_text is defined %}
	<div class="row">
		<table class="centered highlight">
			<thead>
				<tr>
					<th>Range Input</th>
					<th>Range Output</th>
					<th>Text Input</th>
					<th>Text Output</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>{{ response.num_cows_range }}</td>
					<td>{{ response.water_consumption_range }}</td>
					<td>{{ response.num_cows_text }}</td>
					<td>{{ response.water_consumption_text }}</td>
				</tr>
			</tbody>
		</table>
	</div>
	{% else %}
	<!-- Sample form output - not functional -->
	<!-- <div class="row">
		<div class="col s6 center">
			<span class="center" style="border:1px solid black;height:500px;width:500px;display:inline-block;">[Model
				outputs
				go
				here]</span>
		</div>
		<div class="col s6 center">
			<span class="center" style="border:1px solid black;height:500px;width:500px;display:inline-block;">[Model
				outputs
				go
				here]</span>
		</div>
	</div> -->
	{% endif %}
	{% endif %}
	<br><br>
</div>
{% endblock %}
